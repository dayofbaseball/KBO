<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>
            {% block title %}
            {% endblock %}
        </title>
        {% load static %}
        <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
        <link rel="stylesheet" href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css">
        <link rel="stylesheet" href="{% static 'cal/css/calendar.css' %}">
        <link rel="stylesheet" href="{% static 'fonts/fonts.css' %}">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&display=swap">
        {% block styles %}
        {% endblock %}
</head>
<body x-data="{ mobileMenuOpen: false }" class="min-h-screen max-w-screen relative font-ydestreetl bg-paper overflow-x-hidden">
    {% include '_nav.html' %}
    {% block body %}
    {% endblock %}

<script>
document.addEventListener('DOMContentLoaded', function () {
    const toggleBtn = document.getElementById('mobile-menu-toggle');
    const openIcon = document.getElementById('menu-open-icon');
    const closeIcon = document.getElementById('menu-close-icon');
    const mobileMenu = document.getElementById('mobile-menu');
    let scrollY = 0;

    toggleBtn.addEventListener('click', () => {
        const isOpen = toggleBtn.getAttribute('aria-expanded') === 'true';

        if (!isOpen) {
        scrollY = window.scrollY;
        document.body.style.position = 'fixed';
        document.body.style.top = `-${scrollY}px`;
        document.body.style.left = '0';
        document.body.style.right = '0';
        document.body.style.overflowY = 'scroll';
        document.body.style.width = '100%';

        toggleBtn.setAttribute('aria-expanded', 'true');
        openIcon.classList.add('hidden');
        closeIcon.classList.remove('hidden');
        mobileMenu.classList.remove('hidden');
        } else {
        document.body.style.position = '';
        document.body.style.top = '';
        document.body.style.left = '';
        document.body.style.right = '';
        document.body.style.overflowY = '';
        document.body.style.width = '';

        window.scrollTo(0, scrollY);

        toggleBtn.setAttribute('aria-expanded', 'false');
        openIcon.classList.remove('hidden');
        closeIcon.classList.add('hidden');
        mobileMenu.classList.add('hidden');
        }
    });

    window.addEventListener('resize', () => {
        if (window.innerWidth >= 768) {
        toggleBtn.setAttribute('aria-expanded', 'false');
        openIcon.classList.remove('hidden');
        closeIcon.classList.add('hidden');
        mobileMenu.classList.add('hidden');
        document.body.style.position = '';
        document.body.style.top = '';
        document.body.style.overflowY = '';
        document.body.style.width = '';
    }
  });
});
</script>

</body>
</html>