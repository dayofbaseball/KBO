{% extends 'base.html' %}
{% load static %}

{% block title %}로그인 / 회원가입{% endblock %}

{% block body %}
  <div id="container" class="container {% if mode == 'login' %}sign-in{% else %}sign-up{% endif %}">
    <!-- ===== FORM SECTION ===== -->
    <div class="row">
      <!-- ► SIGN UP 폼 -->
      <div class="col align-items-center flex-col sign-up">
        <div class="form-wrapper align-items-center">
          <div class="form sign-up">
            <form method="POST" action="">
              {% csrf_token %}
              {% for field in signup_form %}
                <div class="input-group">
                  {% if field.name == 'username' %}
                    <i class="bx bxs-user"></i>
                  {% elif field.name == 'email' %}
                    <i class="bx bx-mail-send"></i>
                  {% elif field.name in ('password1','password2') %}
                    <i class="bx bxs-lock-alt"></i>
                  {% else %}
                    <i class="bx bxs-edit"></i>
                  {% endif %}
                  {{ field }}
                  {% if field.errors %}
                    <p class="text-red-500 text-sm">{{ field.errors|striptags }}</p>
                  {% endif %}
                </div>
              {% endfor %}
              <button type="submit" name="action" value="signup">Sign up</button>
              <p>
                <span>Already have an account?</span>
                <b onclick="toggle()" class="pointer">Sign in here</b>
              </p>
            </form>
          </div>
        </div>
      </div>
      <!-- ◀ END SIGN UP -->

      <!-- ► SIGN IN 폼 -->
      <div class="col align-items-center flex-col sign-in">
        <div class="form-wrapper align-items-center">
          <div class="form sign-in">
            <form method="POST" action="">
              {% csrf_token %}
              {% for field in login_form %}
                <div class="input-group">
                  {% if field.name == 'username' %}
                    <i class="bx bxs-user"></i>
                  {% elif field.name == 'password' %}
                    <i class="bx bxs-lock-alt"></i>
                  {% else %}
                    <i class="bx bxs-edit"></i>
                  {% endif %}
                  {{ field }}
                  {% if field.errors %}
                    <p class="text-red-500 text-sm">{{ field.errors|striptags }}</p>
                  {% endif %}
                </div>
              {% endfor %}
              <button type="submit" name="action" value="login">Sign in</button>
              <p><b>Forgot password?</b></p>
              <p>
                <span>Don't have an account?</span>
                <b onclick="toggle()" class="pointer">Sign up here</b>
              </p>
            </form>
          </div>
        </div>
      </div>
      <!-- ◀ END SIGN IN -->
    </div>
    <!-- ===== END FORM SECTION ===== -->

    <!-- ===== CONTENT SECTION ===== -->
    <div class="row content-row">
      <!-- ▶ SIGN IN CONTENT -->
      <div class="col align-items-center flex-col">
        <div class="text sign-in">
          <h2>Welcome</h2>
        </div>
        <div class="img sign-in">
          {# (원한다면 여기에 일러스트 이미지 추가 가능) #}
        </div>
      </div>
      <!-- ◀ END SIGN IN CONTENT -->

      <!-- ▶ SIGN UP CONTENT -->
      <div class="col align-items-center flex-col">
        <div class="img sign-up">
          {# (원한다면 여기에 일러스트 이미지 추가 가능) #}
        </div>
        <div class="text sign-up">
          <h2>Join with us</h2>
        </div>
      </div>
      <!-- ◀ END SIGN UP CONTENT -->
    </div>
    <!-- ===== END CONTENT SECTION ===== -->
  </div>

  {# ▼ 스크립트는 이곳에 인라인으로 넣어 두면, 별도 JS 파일 없어도 동작함 #}
  <script>
    let container = document.getElementById('container');

    function toggle() {
      container.classList.toggle('sign-in');
      container.classList.toggle('sign-up');
    }

    // 페이지 로드 직후 200ms 있다가 sign-in 모드 활성화 (기본적으로 로그인 화면 보이게)
    setTimeout(() => {
      container.classList.add('sign-in');
    }, 200);
  </script>
{% endblock %}
