{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>라인업</title>
</head>
<body class="pt-[90px]">
    {% include '_nav.html' %}
    {% block body %}
    {% if has_lineup and game %}
<div class="grid grid-cols-2 max-w-3xl mx-auto">
            <!-- 우리 팀 라인업 -->
            <div class="border">
                <div class="flex justify-center">
                    <img src="{% static 'images/team/' %}{{ user.team }}.svg" alt="우리팀 라인업" class="h-16">
                </div>
                <div class="">
                    {% for lineup in user_lineup %}
                        {% if lineup.batting_order == 1 %}
                            <div class="flex justify-center">{% include '_my_pcard.html' %}</div>
                        {% else %}
                            <div class="flex items-center justify-center border">
                                <span class="relative -top-[11px] text-sm mr-1">{{ lineup.batting_order|add:"-1" }}</span>
                                {% include '_hface.html' %}
                                {% include '_my_hcard.html' %}
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>

            <!-- 상대 팀 라인업 -->
            <div class="border">
                <div class="flex justify-center">
                    <img src="{% static 'images/team/' %}{{ opponent_team }}.svg" alt="상대팀 라인업" class="h-16">
                </div>
                <div class="">
                    {% for lineup in opponent_lineup %}
                        {% if lineup.batting_order == 1 %}
                            <div class="flex justify-center">{% include '_your_pcard.html' %}</div>
                        {% else %}
                            <div class="flex items-center justify-center border">
                                {% include '_your_hcard.html' %}
                                {% include '_hface.html' %}
                                <span class="relative -top-[11px] text-sm ml-1">{{ lineup.batting_order|add:"-1" }}</span>
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>

        {% if game %}
            <div class="fixed top-[100px] right-10 z-50">
                <form method="post" action="{% url 'cal:attendance' game.id %}">
                    {% csrf_token %}
                    <button type="submit" style="background: none; border: none; padding: 0;">
                        {% if request.user in game.attendance_users.all %}
                            <img src="{% static 'images/icon/full_glove.png' %}" alt="간 경기" class="w-10 h-10">
                        {% else %}
                            <img src="{% static 'images/icon/empty_glove.png' %}" alt="안간 경기" class="w-10 h-10">
                        {% endif %}
                    </button>
                </form>
            </div>
        {% endif %}
    {% else %}
        <div class="text-center mt-10 text-red-500 text-xl">
            ⚠️ 라인업이 아직 등록되지 않았습니다.
        </div>
    {% endif %}
    {% endblock %}
</body>
</html>
